# 山形県新型コロナウィルス対策認証店リストへの座標付与サイト

このプロジェクトは、山形県新型コロナウィルス対策認証店のサイト（ <https://yamagata-ninsho.jp/> ）からダウンロードできる認証店一覧データに対し、座標（緯度、経度）を付与するものです。

CSVファイル（list.cscv）をサイトに読み込ませて実行することにより、住所の情報を座標に変換します。変換後、手動で座標を調整します。

## プロジェクトの実行方法

このプロジェクトは、ローカル環境で実行されることを想定しています。ファイルをクローンし、実行してください。

### 使用フレームワーク

React/Typescriptを利用しています。

### 使用ライブラリ

@types/react

@types/react-dom

@react-google-maps/api

react-csv

### Google MAP APIの利用について

ジオコーディング用に「Geocoding API」、参考結果表示用に「Maps Javascript API」を利用しています。実行の際には各自APIを用意してください。このアプリケーションは、ジオコーディングを参考利用しているだけですので、ジオコーディング結果は参考値として取り扱ってください。（ジオコーディング結果をそのまま使う場合は、Google Mapへの表示が必要です）

ジオコーディング結果を参考に、手で修正した結果が正式な結果となります。当サイトでダウンロードできるデータは、手修正後のデータを想定しています。

APIキーは環境変数（.env）に格納しています。以下のように指定してください。

`REACT_APP_GOOGLE_API_KEY="APIキー"`

## サイト仕様

1.サイトを起動し、ファイル選択ダイアログからlist.csvを開きます。

2.「CSVを読み込んでマッピング」ボタンから処理を起動します。ジオコーディングが終わると結果が下部のマップに表示されます。

3.ジオコーディング結果を参考に、マーカーをドラッグして座標を修正します。

4.マップにマーカーが表示された状態から「ダウンロード」リンクを押すと、CSVファイルの各行末尾に座標が付与されたファイルがダウンロードできます。

### 注意事項

* ファイル処理（エンコードや改行コード補正）については現状動くだけの状態になっており、出力結果を活用する場合はテキストエディタでの補正が必要です。
* Geocoding APIへのリクエストが多数になるとうまく動かないようです。100件程度であれば動きます。また、実行の際には1秒間のスリープを入れています。

### 当プロジェクトについて

当プロジェクトは斎藤雄輔が個人的に開発しているものになります。斎藤雄輔が所属する企業や団体とは関係がありませんし、GitHubへの記述やコメント等については、個人の見解となります。
